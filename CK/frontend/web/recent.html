<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Gáº§n Ä‘Ã¢y | CloudVault</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <header class="header">
    <div class="logo">
        <img src="assets/Logo.png" alt="CloudVault Logo">
    </div>
    <div class="title">CloudVault</div>
    <div class="user-actions">
        <button id="loginBtn" onclick="window.location.href='login.html'">ÄÄƒng nháº­p</button>
        <button id="registerBtn" onclick="window.location.href='register.html'">ÄÄƒng kÃ½</button>
        <span id="userName" class="hidden"></span>
        <button id="logoutBtn" class="hidden">ÄÄƒng xuáº¥t</button>
    </div>
</header>

    <nav class="nav-bar">
    <ul>
        <li><a href="index.html">ğŸ“Š Dashboard</a></li>
        <li><a href="documents.html">ğŸ“‚ TÃ i liá»‡u</a></li> 
        <li><a href="recent.html" class="active">â±ï¸ Gáº§n Ä‘Ã¢y</a></li>
        <li><a href="favorites.html">â¤ï¸ YÃªu thÃ­ch</a></li>
        <li><a href="trash.html">ğŸ—‘ï¸ RÃ¡c</a></li>
        <li><a href="settings.html">âš™ï¸ Cáº¥u hÃ¬nh</a></li>
    </ul>
    <a href="upload.html" class="btn-new">ğŸ“¤ Táº£i lÃªn</a>
</nav>

    <main class="content">
    <h2 style="color: #667eea; font-size: 24px; font-weight: 700; margin-bottom: 10px;">â±ï¸ Gáº§n Ä‘Ã¢y</h2>
    <p style="color: #666; margin-bottom: 25px;">Nhá»¯ng tÃ i liá»‡u báº¡n Ä‘Ã£ xem gáº§n nháº¥t</p>
    
        <div class="doc-grid" id="recent-view-container">
        <p>Äang táº£i lá»‹ch sá»­ xem...</p>
    </div>

  </main>

    <footer class="footer">
    <p>Kho lÆ°u trá»¯ cá»§a tÃ´i Â© 2026</p>
  </footer>

    <script src="js/api.js"></script>
  <script src="js/main.js"></script>

    <script>
    document.addEventListener("DOMContentLoaded", () => {
        const container = document.getElementById("recent-view-container");
        
        if (!isLoggedIn()) {
             container.innerHTML = '<p><a href="login.html">ÄÄƒng nháº­p</a> Ä‘á»ƒ xem lá»‹ch sá»­ cá»§a báº¡n.</p>';
             return;
        }
        getRecentlyViewed()
            .then(data => {
                if (data.documents && data.documents.length > 0) {
                    container.innerHTML = ""; 
                    
                    data.documents.forEach(doc => { 
                        const docCard = `
                            <div class="doc-card" onclick="viewDocument(this)" data-id="${doc.id}">
                                <h3>${doc.filename}</h3>
                                <p>NgÆ°á»i Ä‘Äƒng: ${doc.owner_name || 'KhÃ´ng rÃµ'}</p>
                                <p style="font-weight: bold;">Vá»«a xem gáº§n Ä‘Ã¢y</p> 
                            </div>
                        `;
                        container.innerHTML += docCard;
                    });
                } else {
                    container.innerHTML = "<p>Báº¡n chÆ°a xem tÃ i liá»‡u nÃ o.</p>";
                }
            })
            .catch(error => {
                console.error("Lá»—i táº£i recent.html:", error);
                container.innerHTML = "<p>KhÃ´ng thá»ƒ táº£i lá»‹ch sá»­ xem.</p>";
            });
    });
  </script>

</body>
</html>