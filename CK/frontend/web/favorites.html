<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>YÃªu thÃ­ch | CloudVault</title>

  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/documents.css">
  <link rel="stylesheet" href="css/favorites.css">
</head>

<body>
  <!-- ================= HEADER ================= -->
  <header class="header">
    <div class="logo">
      <img src="assets/Logo.png" alt="CloudVault Logo">
    </div>
    <div class="title">CloudVault</div>
    <div class="user-actions">
      <button id="loginBtn" onclick="window.location.href='login.html'">ÄÄƒng nháº­p</button>
      <button id="registerBtn" onclick="window.location.href='register.html'">ÄÄƒng kÃ½</button>
      <span id="userName" class="hidden"></span>
      <button id="logoutBtn" class="hidden">ÄÄƒng xuáº¥t</button>
    </div>
  </header>

  <!-- ================= NAV ================= -->
  <nav class="nav-bar">
    <ul>
      <li><a href="index.html">ğŸ“Š Dashboard</a></li>
      <li><a href="documents.html">ğŸ“‚ TÃ i liá»‡u</a></li>
      <li><a href="recent.html">â±ï¸ Gáº§n Ä‘Ã¢y</a></li>
      <li><a href="favorites.html" class="active">â¤ï¸ YÃªu thÃ­ch</a></li>
      <li><a href="trash.html">ğŸ—‘ï¸ RÃ¡c</a></li>
      <li><a href="settings.html">âš™ï¸ Cáº¥u hÃ¬nh</a></li>
    </ul>
    <a href="upload.html" class="btn-new">ğŸ“¤ Táº£i lÃªn</a>
  </nav>

  <!-- ================= MAIN ================= -->
  <main class="content">
    <section class="favorites-section">
      <div class="section-header">
        <h2>â¤ï¸ TÃ i liá»‡u yÃªu thÃ­ch</h2>
        <p>CÃ¡c tÃ i liá»‡u báº¡n Ä‘Ã£ Ä‘Ã¡nh dáº¥u Ä‘á»ƒ truy cáº­p nhanh</p>
      </div>

      <div class="doc-grid" id="favorites-container">
        <div class="status loading">
          â³ Äang táº£i danh sÃ¡ch yÃªu thÃ­ch...
        </div>
      </div>
    </section>
  </main>

  <!-- ================= FOOTER ================= -->
  <footer class="footer">
    <p>CloudVault Â© 2026 | Ná»n táº£ng lÆ°u giá»¯ & quáº£n lÃ½ tÃ i liá»‡u an toÃ n</p>
  </footer>

  <!-- ================= SCRIPT ================= -->
  <script src="js/api.js"></script>
  <script src="js/main.js"></script>
  <script src="js/documents.js"></script>

  <script>
    const container = document.getElementById("favorites-container");
    const token = localStorage.getItem("token");

    if (!token) {
      container.innerHTML = `
        <div class="status warning">
          ğŸ“Œ Vui lÃ²ng <a href="login.html">Ä‘Äƒng nháº­p</a> Ä‘á»ƒ xem tÃ i liá»‡u yÃªu thÃ­ch.
        </div>
      `;
    } else {
      getFavoriteDocuments(token)
        .then(data => {
          if (data.documents && data.documents.length > 0) {
            container.innerHTML = "";
            renderFiles(data.documents, token);
          } else {
            container.innerHTML = `
              <div class="status empty">
                ğŸ’” Báº¡n chÆ°a Ä‘Ã¡nh dáº¥u yÃªu thÃ­ch tÃ i liá»‡u nÃ o.
              </div>
            `;
          }
        })
        .catch(() => {
          container.innerHTML = `
            <div class="status error">
              âŒ KhÃ´ng thá»ƒ táº£i danh sÃ¡ch yÃªu thÃ­ch. Vui lÃ²ng thá»­ láº¡i.
            </div>
          `;
        });
    }
  </script>
</body>
</html>
